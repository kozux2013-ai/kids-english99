<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å¿«æ¨‚å­¸è‹±æ–‡ - å…¨æ°‘è‹±æª¢åˆç´šç‰ˆ</title>
  
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(to bottom, #e6f3ff, #cce0ff);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      text-align: center;
      color: #333;
    }
    h1 {
      font-size: 2.5rem;
      margin: 20px 0 10px;
      color: #1e40af;
      cursor: pointer;
      user-select: none;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 500px;
      margin: 0 auto 20px;
    }
    #score, #bestScore {
      font-size: 1.6rem;
      font-weight: bold;
      padding: 8px 16px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    #score { color: #7c3aed; background: rgba(255,255,255,0.7); }
    #bestScore { color: #059669; background: #d1fae5; font-size: 1.4rem; }
    .timer-container {
      position: relative;
      width: 140px;
      height: 140px;
      margin: 0 auto 20px;
    }
    .timer-circle { width: 100%; height: 100%; }
    .timer-circle-bg { fill: none; stroke: #e5e7eb; stroke-width: 12; }
    .timer-circle-progress {
      fill: none;
      stroke: #10b981;
      stroke-width: 12;
      stroke-linecap: round;
      transform: rotate(-90deg);
      transform-origin: 50% 50%;
      transition: stroke 0.5s ease;
    }
    .timer-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3rem;
      font-weight: bold;
      color: #1e40af;
    }
    .low-time { animation: pulse 1s infinite; }
    @keyframes pulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.08); }
    }
    .card {
      background: white;
      border-radius: 20px;
      padding: 30px;
      margin: 0 auto;
      max-width: 360px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }
    .zh-word {
      font-size: 3.5rem;
      font-weight: bold;
      margin: 20px 0;
      color: #dc2626;
    }
    input {
      font-size: 1.6rem;
      padding: 12px;
      width: 85%;
      text-align: center;
      border: 3px solid #bfdbfe;
      border-radius: 12px;
      margin: 15px 0;
    }
    input:focus { border-color: #3b82f6; outline: none; }
    button {
      font-size: 1.3rem;
      padding: 12px 28px;
      margin: 8px 6px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-start { background: #f59e0b; color: white; }
    .btn-start:hover { background: #d97706; }
    .btn-check { background: #3b82f6; color: white; }
    .btn-check:hover { background: #2563eb; }
    .btn-speak { background: #10b981; color: white; }
    .btn-speak:hover { background: #059669; }
    .result {
      font-size: 1.6rem;
      font-weight: bold;
      margin-top: 25px;
      min-height: 2.5rem;
    }
    .correct { color: #059669; }
    .wrong { color: #dc2626; }
    #end-message {
      display: none;
      font-size: 1.8rem;
      font-weight: bold;
      color: #1e40af;
      margin: 30px 0;
    }
    /* å®¶é•·æ¨¡å¼é¢æ¿ */
    #parent-panel {
      display: none;
      margin: 30px auto;
      max-width: 500px;
      background: #fefcbf;
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
      text-align: left;
    }
    #parent-panel h2 { text-align: center; color: #b45309; }
    #parent-panel input, #parent-panel select {
      font-size: 1.1rem;
      padding: 10px;
      width: 100%;
      margin: 10px 0;
      border-radius: 8px;
      border: 2px solid #d1d5db;
      box-sizing: border-box;
    }
    #parent-panel button { width: 48%; margin: 5px 1%; background: #3b82f6; color: white; }
    #parent-panel button:hover { background: #2563eb; }
    #word-list { max-height: 200px; overflow-y: auto; margin: 15px 0; padding: 10px; background: white; border-radius: 8px; }
    #word-list div { padding: 5px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
    #stats { background: #d1fae5; padding: 15px; border-radius: 12px; margin: 15px 0; }
    #recent-scores { font-size: 0.9rem; }
  </style>
</head>

<body>

  <header>
    <h1 id="title">å¿«æ¨‚å­¸è‹±æ–‡ âœ¨</h1>
    <div>
      <div id="score">åˆ†æ•¸ï¼š0</div>
      <div id="bestScore">æœ€ä½³ï¼š0</div>
    </div>
  </header>

  <div class="timer-container">
    <svg class="timer-circle" viewBox="0 0 100 100">
      <circle class="timer-circle-bg" cx="50" cy="50" r="45"></circle>
      <circle class="timer-circle-progress" id="progress" cx="50" cy="50" r="45"></circle>
    </svg>
    <div class="timer-text" id="timer">60</div>
  </div>

  <div class="card">
    <div class="zh-word" id="chinese">æº–å‚™é–‹å§‹ï¼</div>
    <input type="text" id="answer" placeholder="è¼¸å…¥è‹±æ–‡" autocomplete="off" disabled />
    <div>
      <button class="btn-start" id="startBtn" onclick="startGame()">é–‹å§‹æŒ‘æˆ°ï¼</button>
      <button class="btn-check" id="checkBtn" onclick="checkAnswer()" style="display:none;">é€å‡º</button>
      <button class="btn-speak" id="speakBtn" onclick="speak()" style="display:none;">ğŸ”Š è½ç™¼éŸ³</button>
    </div>
    <div class="result" id="result"></div>
  </div>

  <div id="end-message">
    æ™‚é–“åˆ°å•¦ï¼<br>ä½ çš„ç¸½åˆ†ï¼š<span id="finalScore">0</span> åˆ†<br>è¶…å²å®³ï¼å†ä¾†ä¸€è¼ªå—ï¼Ÿâœ¨
  </div>

  <!-- å®¶é•·æ¨¡å¼é¢æ¿ -->
  <div id="parent-panel">
    <h2>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶é•·æ§åˆ¶ä¸­å¿ƒ</h2>
    <p>è¼¸å…¥å¯†ç¢¼ï¼ˆé è¨­ï¼š1234ï¼‰</p>
    <input type="password" id="parent-password" placeholder="å¯†ç¢¼" />
    <button onclick="checkParentPassword()">é€²å…¥</button>

    <div id="parent-settings" style="display:none;">
      <!-- å­¸ç¿’çµ±è¨ˆ -->
      <div id="stats">
        <h3>å­¸ç¿’ç´€éŒ„</h3>
        <p>æœ€ä½³åˆ†æ•¸ï¼š <strong id="best-score-stat">0</strong></p>
        <p>ç¸½ç­”é¡Œæ¬¡æ•¸ï¼š <strong id="total-questions">0</strong></p>
        <p>ç­”å°ç‡ï¼š <strong id="accuracy">0%</strong></p>
        <div id="recent-scores">
          <strong>æœ€è¿‘5å ´åˆ†æ•¸ï¼š</strong><br>
          <span id="recent-list">-</span>
        </div>
      </div>

      <!-- éŠæˆ²è¨­å®š -->
      <h3>éŠæˆ²è¨­å®š</h3>
      <label>è¨ˆæ™‚æ™‚é–“ï¼ˆç§’ï¼‰ï¼š</label>
      <select id="game-time">
        <option value="30">30ç§’</option>
        <option value="60" selected>60ç§’</option>
        <option value="90">90ç§’</option>
        <option value="120">120ç§’</option>
      </select>
      <label>æ¯é¡Œåˆ†æ•¸ï¼š</label>
      <select id="points-per-question">
        <option value="5">5åˆ†</option>
        <option value="10" selected>10åˆ†</option>
        <option value="15">15åˆ†</option>
        <option value="20">20åˆ†</option>
      </select>
      <label><input type="checkbox" id="sound-toggle" checked> é–‹å•ŸèªéŸ³</label>
      <button onclick="applySettings()">å¥—ç”¨è¨­å®š</button>

      <!-- å–®å­—ç®¡ç† -->
      <h3>å–®å­—ç®¡ç†ï¼ˆå…¨æ°‘è‹±æª¢åˆç´šï¼‰</h3>
      <p>ç›®å‰å–®å­—æ•¸ï¼š <strong id="word-count">850+</strong></p>
      <input id="new-word-en" placeholder="è‹±æ–‡ï¼ˆå¦‚ï¼šbananaï¼‰" />
      <input id="new-word-zh" placeholder="ä¸­æ–‡ï¼ˆå¦‚ï¼šé¦™è•‰ï¼‰" />
      <button onclick="addWord()">æ–°å¢å–®å­—</button>
      <div id="word-list"></div>

      <!-- æ§åˆ¶æŒ‰éˆ• -->
      <div style="margin-top:20px;">
        <button onclick="resetScore()" style="background:#ef4444;color:white;">é‡è¨­ç•¶å‰åˆ†æ•¸</button>
        <button onclick="resetAllData()" style="background:#6b7280;color:white;">é‡ç½®æ‰€æœ‰æ•¸æ“š</button>
      </div>
    </div>
  </div>

  <script>
    const DEFAULT_PASSWORD = "1234";
    let TOTAL_TIME = 60;
    let POINTS_PER_QUESTION = 10;
    let soundEnabled = true;

    // å…¨æ°‘è‹±æª¢åˆç´šå–®å­—åº«ï¼ˆç´„850å€‹æ ¸å¿ƒå–®å­—ï¼Œå·²åˆ†é¡æ•´ç†ï¼‰
    let words = [
      // å‹•ç‰©
      {en: "dog", zh: "ç‹—"}, {en: "cat", zh: "è²“"}, {en: "bird", zh: "é³¥"}, {en: "fish", zh: "é­š"}, {en: "horse", zh: "é¦¬"},
      {en: "cow", zh: "ç‰›"}, {en: "pig", zh: "è±¬"}, {en: "sheep", zh: "ç¾Š"}, {en: "chicken", zh: "é›"}, {en: "duck", zh: "é´¨"},
      {en: "rabbit", zh: "å…”å­"}, {en: "mouse", zh: "è€é¼ "}, {en: "elephant", zh: "å¤§è±¡"}, {en: "lion", zh: "ç…å­"}, {en: "tiger", zh: "è€è™"},
      {en: "monkey", zh: "çŒ´å­"}, {en: "bear", zh: "ç†Š"}, {en: "snake", zh: "è›‡"}, {en: "frog", zh: "é’è›™"}, {en: "butterfly", zh: "è´è¶"},

      // é£Ÿç‰©èˆ‡é£²æ–™
      {en: "apple", zh: "è˜‹æœ"}, {en: "banana", zh: "é¦™è•‰"}, {en: "orange", zh: "æ©˜å­"}, {en: "grape", zh: "è‘¡è„"}, {en: "strawberry", zh: "è‰è“"},
      {en: "watermelon", zh: "è¥¿ç“œ"}, {en: "cake", zh: "è›‹ç³•"}, {en: "bread", zh: "éºµåŒ…"}, {en: "rice", zh: "ç±³é£¯"}, {en: "noodle", zh: "éºµ"},
      {en: "egg", zh: "è›‹"}, {en: "milk", zh: "ç‰›å¥¶"}, {en: "water", zh: "æ°´"}, {en: "juice", zh: "æœæ±"}, {en: "tea", zh: "èŒ¶"},
      {en: "coffee", zh: "å’–å•¡"}, {en: "ice cream", zh: "å†°æ·‡æ·‹"}, {en: "candy", zh: "ç³–æœ"}, {en: "chocolate", zh: "å·§å…‹åŠ›"}, {en: "cookie", zh: "é¤…ä¹¾"},

      // é¡è‰²
      {en: "red", zh: "ç´…è‰²"}, {en: "blue", zh: "è—è‰²"}, {en: "green", zh: "ç¶ è‰²"}, {en: "yellow", zh: "é»ƒè‰²"}, {en: "orange", zh: "æ©˜è‰²"},
      {en: "purple", zh: "ç´«è‰²"}, {en: "pink", zh: "ç²‰ç´…è‰²"}, {en: "black", zh: "é»‘è‰²"}, {en: "white", zh: "ç™½è‰²"}, {en: "brown", zh: "æ£•è‰²"},

      // æ•¸å­—èˆ‡æ™‚é–“
      {en: "one", zh: "ä¸€"}, {en: "two", zh: "äºŒ"}, {en: "three", zh: "ä¸‰"}, {en: "four", zh: "å››"}, {en: "five", zh: "äº”"},
      {en: "six", zh: "å…­"}, {en: "seven", zh: "ä¸ƒ"}, {en: "eight", zh: "å…«"}, {en: "nine", zh: "ä¹"}, {en: "ten", zh: "å"},
      {en: "morning", zh: "æ—©ä¸Š"}, {en: "afternoon", zh: "ä¸‹åˆ"}, {en: "evening", zh: "æ™šä¸Š"}, {en: "night", zh: "å¤œæ™š"}, {en: "today", zh: "ä»Šå¤©"},

      // å®¶åº­èˆ‡äººç‰©
      {en: "family", zh: "å®¶åº­"}, {en: "mother", zh: "åª½åª½"}, {en: "father", zh: "çˆ¸çˆ¸"}, {en: "brother", zh: "å“¥å“¥/å¼Ÿå¼Ÿ"}, {en: "sister", zh: "å§å§/å¦¹å¦¹"},
      {en: "grandma", zh: "å¥¶å¥¶/å¤–å©†"}, {en: "grandpa", zh: "çˆºçˆº/å¤–å…¬"}, {en: "friend", zh: "æœ‹å‹"}, {en: "teacher", zh: "è€å¸«"}, {en: "student", zh: "å­¸ç”Ÿ"},

      // å­¸æ ¡èˆ‡æ–‡å…·
      {en: "school", zh: "å­¸æ ¡"}, {en: "classroom", zh: "æ•™å®¤"}, {en: "book", zh: "æ›¸"}, {en: "notebook", zh: "ç­†è¨˜æœ¬"}, {en: "pencil", zh: "é‰›ç­†"},
      {en: "pen", zh: "é‹¼ç­†"}, {en: "eraser", zh: "æ©¡çš®æ“¦"}, {en: "ruler", zh: "å°º"}, {en: "bag", zh: "æ›¸åŒ…"}, {en: "desk", zh: "æ›¸æ¡Œ"},

      // æ—¥å¸¸ç”¨å“èˆ‡å‹•ä½œ
      {en: "house", zh: "æˆ¿å­"}, {en: "room", zh: "æˆ¿é–“"}, {en:
